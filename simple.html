<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<link type="text/css" rel="stylesheet" href="style.css">
		<title>My first Three.js app</title>
	</head>
	    
    <body>
       <script src="../js/three.js"></script>
        <script src="../js/cannon.js"></script>
        <script src="../js/PointerLockControls&Cannon.js"></script>


        <div id="blocker">
            <div id="instructions">
				<p>
                <span style="font-size:25px">Клікніть для запуску</span>
                <br>
                (W,S,A,D = Для управління, SPACE = Стрибок, R = Перезавантаження)
            </div>
        </div>  
        <script>
var scene, camera, renderer, controls, loader;
var sphereShape, sphereBody, world;
var cube, sphere;
var bench;


var controls,time = Date.now();
var blocker = document.getElementById( 'blocker' );
var instructions = document.getElementById( 'instructions' );
			
var havePointerLock = 'pointerLockElement' in document || 'mozPointerLockElement' in document || 'webkitPointerLockElement' in document;
				if ( havePointerLock ) {
				var element = document.body;
				var pointerlockchange = function ( event ) {
                    if ( document.pointerLockElement === element || document.mozPointerLockElement === element || document.webkitPointerLockElement === element ) {
                        controls.enabled = true;
                        blocker.style.display = 'none';
                    } else {
                        controls.enabled = false;
                        blocker.style.display = '-webkit-box';
                        blocker.style.display = '-moz-box';
                        blocker.style.display = 'box';
                        instructions.style.display = '';
                    }
                }
				var pointerlockerror = function ( event ) {
						instructions.style.display = '';
                }
                document.addEventListener( 'pointerlockchange', pointerlockchange, false );
                document.addEventListener( 'mozpointerlockchange', pointerlockchange, false );
                document.addEventListener( 'webkitpointerlockchange', pointerlockchange, false );
                document.addEventListener( 'pointerlockerror', pointerlockerror, false );
                document.addEventListener( 'mozpointerlockerror', pointerlockerror, false );
                document.addEventListener( 'webkitpointerlockerror', pointerlockerror, false );
                instructions.addEventListener( 'click', function ( event ) {
                    instructions.style.display = 'none';
                    element.requestPointerLock = element.requestPointerLock || element.mozRequestPointerLock || element.webkitRequestPointerLock;
                    if ( /Firefox/i.test( navigator.userAgent ) ) {
                        var fullscreenchange = function ( event ) {
                            if ( document.fullscreenElement === element || document.mozFullscreenElement === element || document.mozFullScreenElement === element ) {
                                document.removeEventListener( 'fullscreenchange', fullscreenchange );
                                document.removeEventListener( 'mozfullscreenchange', fullscreenchange );
                                element.requestPointerLock();
                            }
                        }
                        document.addEventListener( 'fullscreenchange', fullscreenchange, false );
                        document.addEventListener( 'mozfullscreenchange', fullscreenchange, false );
                        element.requestFullscreen = element.requestFullscreen || element.mozRequestFullscreen || element.mozRequestFullScreen || element.webkitRequestFullscreen;
                        element.requestFullscreen();
                    } else {
                        element.requestPointerLock();
                    }
                }, false );
            } else {
                instructions.innerHTML = 'Your browser doesn\'t seem to support Pointer Lock API';
            }

initCannon();        
initScene();
light();
animate();

 function initCannon(){        
				world = new CANNON.World();
					

                var mass = 5, radius = 1.3;
					sphereShape = new CANNON.Sphere(radius);
					sphereBody = new CANNON.Body({ mass: mass });
					sphereBody.addShape(sphereShape);
					sphereBody.position.set(0,0,40);
					sphereBody.linearDamping = 0.9;
				world.addBody(sphereBody);

                var groundShape = new CANNON.Plane();
                var groundBody = new CANNON.Body({ mass: 0 });
					groundBody.addShape(groundShape);
					groundBody.quaternion.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2);
				world.addBody(groundBody);	
            }

function initScene()
{
scene = new THREE.Scene();
camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 10000 );
camera.position.set( 0, 5, 0 );

controls = new PointerLockControls(camera, sphereBody );
scene.add( controls.getObject() );

geometry();

renderer = new THREE.WebGLRenderer();
renderer.setSize( window.innerWidth, window.innerHeight );
document.body.appendChild( renderer.domElement );
             
window.addEventListener( 'resize', onWindowResize, false );
}

function onWindowResize() {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize( window.innerWidth, window.innerHeight );
} 

function light(){
var ambientLight = new THREE.AmbientLight( 0xffffff, 1.5 ); 
scene.add( ambientLight );
}

function geometry(){
loader = new THREE.TextureLoader();
box = loader.load('images/sky.jpg', function ( texture ) {
var geometry = new THREE.SphereGeometry( 800, 32, 32 );
var material = new THREE.MeshPhongMaterial({map: texture, side:THREE.DoubleSide});
box = new THREE.Mesh(geometry, material);
scene.add(box)});


loader = new THREE.TextureLoader();
plane = loader.load('images/grass.jpg', function ( texture ) {
var geometry = new THREE.CircleGeometry(1000, 32);
var material = new THREE.MeshPhongMaterial({map: texture, side:THREE.DoubleSide});
plane = new THREE.Mesh(geometry, material);
texture.wrapS = texture.wrapT = THREE.RepeatWrapping; 
texture.repeat.set(4,4);	
plane.rotation.x = (Math.PI / 2);
scene.add(plane)});	

loader = new THREE.TextureLoader();
road = loader.load('texture/road.jpg', function ( texture ) {
var geometry = new THREE.PlaneGeometry(100, 400);
var material = new THREE.MeshPhongMaterial({map: texture, side:THREE.DoubleSide});
road = new THREE.Mesh(geometry, material);
texture.wrapS = texture.wrapT = THREE.RepeatWrapping; 
texture.repeat.set(1,4);    
road.rotation.x = (Math.PI / 2);
road.position.y = 0.1;
scene.add(road)}); 

loader = new THREE.TextureLoader();
road = loader.load('texture/road.jpg', function ( texture ) {
var geometry = new THREE.PlaneGeometry(100, 600);
var material = new THREE.MeshPhongMaterial({map: texture, side:THREE.DoubleSide});
road = new THREE.Mesh(geometry, material);
texture.wrapS = texture.wrapT = THREE.RepeatWrapping; 
texture.repeat.set(1,4);    
road.rotation.x = (Math.PI / 2);
road.position.y = 0.1;
road.position.x = -300;
scene.add(road)}); 

loader = new THREE.TextureLoader();
road = loader.load('texture/road.jpg', function ( texture ) {
var geometry = new THREE.PlaneGeometry(100, 600);
var material = new THREE.MeshPhongMaterial({map: texture, side:THREE.DoubleSide});
road = new THREE.Mesh(geometry, material);
texture.wrapS = texture.wrapT = THREE.RepeatWrapping; 
texture.repeat.set(1,4);    
road.rotation.x = (Math.PI / 2);
road.position.y = 0.1;
road.position.x = 300;
scene.add(road)}); 

loader = new THREE.TextureLoader();
road = loader.load('texture/road.jpg', function ( texture ) {
var geometry = new THREE.PlaneGeometry(100, 500);
var material = new THREE.MeshPhongMaterial({map: texture, side:THREE.DoubleSide});
road = new THREE.Mesh(geometry, material);
texture.wrwapS = texture.wrapT = THREE.RepeatWrapping; 
texture.repeat.set(1,4);   
road.rotation.x = (Math.PI / 2);
road.rotation.z = (Math.PI / 2);
road.position.y = 0.1;
road.position.z = 250;
scene.add(road)});

loader = new THREE.TextureLoader();
road = loader.load('texture/road.jpg', function ( texture ) {
var geometry = new THREE.PlaneGeometry(100, 500);
var material = new THREE.MeshPhongMaterial({map: texture, side:THREE.DoubleSide});
road = new THREE.Mesh(geometry, material);
texture.wrwapS = texture.wrapT = THREE.RepeatWrapping; 
texture.repeat.set(1,4);   
road.rotation.x = (Math.PI / 2);
road.rotation.z = (Math.PI / 2);
road.position.y = 0.1;
road.position.z = -250;
scene.add(road)}); 

loader = new THREE.TextureLoader();
cube = loader.load('texture/house1.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,100,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(100, 50, 50);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house1.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,100,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(200, 50, 50);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house2.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,200,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
texture.wrapS = texture.wrapT = THREE.RepeatWrapping; 
texture.repeat.set(1,4); 
cube.position.set(0, 100, 350);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house2.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,200,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
texture.wrapS = texture.wrapT = THREE.RepeatWrapping; 
texture.repeat.set(1,4); 
cube.position.set(100, 100, 350);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house2.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,200,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
texture.wrapS = texture.wrapT = THREE.RepeatWrapping; 
texture.repeat.set(1,4); 
cube.position.set(200, 100, 350);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house2.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,200,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
texture.wrapS = texture.wrapT = THREE.RepeatWrapping; 
texture.repeat.set(1,4); 
cube.position.set(300, 100, 350);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house2.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,200,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
texture.wrapS = texture.wrapT = THREE.RepeatWrapping; 
texture.repeat.set(1,4); 
cube.position.set(400, 100, 350);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house2.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,200,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
texture.wrapS = texture.wrapT = THREE.RepeatWrapping; 
texture.repeat.set(1,4); 
cube.position.set(-100, 100, 350);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house2.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,200,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
texture.wrapS = texture.wrapT = THREE.RepeatWrapping; 
texture.repeat.set(1,4); 
cube.position.set(-200, 100, 350);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house2.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,200,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
texture.wrapS = texture.wrapT = THREE.RepeatWrapping; 
texture.repeat.set(1,4); 
cube.position.set(-300, 100, 350);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house2.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,200,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
texture.wrapS = texture.wrapT = THREE.RepeatWrapping; 
texture.repeat.set(1,4); 
cube.position.set(-400, 100, 350);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house2.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,200,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
texture.wrapS = texture.wrapT = THREE.RepeatWrapping; 
texture.repeat.set(1,4); 
cube.position.set(100, 100, 150);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house2.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,200,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
texture.wrapS = texture.wrapT = THREE.RepeatWrapping; 
texture.repeat.set(1,4); 
cube.position.set(200, 100, 150);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house3.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,100,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(100, 50, -50);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house3.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,100,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(200, 50, -50);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house3.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,100,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(100, 50, -150);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house3.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,100,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(200, 50, -150);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(-100, 35, 50);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house2.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,100,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(-100, 50, 150);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house3.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(-100, 35, -50);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house1.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(-100, 35, -150);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(-200, 35, 50);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house2.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,100,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(-200, 50, 150);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house3.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(-200, 35, -50);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house1.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(-200, 35, -150);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(-400, 35, 50);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house2.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,100,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(-400, 50, 150);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house3.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(-400, 35, -50);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house1.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(-400, 35, -150);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house3.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(-400, 35, 250);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house1.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(-400, 35, -250);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(400, 35, 50);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house2.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,100,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(400, 50, 150);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house3.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(400, 35, -50);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house1.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(400, 35, -150);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house3.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(400, 35, 250);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house1.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(400, 35, -250);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house1.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(0, 35, -350);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house1.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(100, 35, -350);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house1.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(200, 35, -350);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house1.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(300, 35, -350);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house1.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(400, 35, -350);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house1.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(-100, 35, -350);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house1.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(-200, 35, -350);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house1.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(-300, 35, -350);
scene.add(cube);});

loader = new THREE.TextureLoader();
cube = loader.load('texture/house1.jpg', function ( texture ) {
var geometry = new THREE.CubeGeometry(70,70,80);
var material = new THREE.MeshBasicMaterial({map: texture});
cube = new THREE.Mesh(geometry, material);
cube.position.set(-400, 35, -350);
scene.add(cube);});

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 0, 50, 350 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 100, 50, 350 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 200, 50, 350 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 300, 50, 350 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 400, 50, 350 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -100, 50, 350 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -200, 50, 350 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -300, 50, 350 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -400, 50, 350 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 0, 35, -350 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 100, 35, -350 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 200, 35, -350 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 300, 35, -350 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 400, 35, -350 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -100, 35, -350 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -200, 35, -350 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -300, 35, -350 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -400, 35, -350 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 100, 0, 50 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 100, 0, -50 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 100, 0, -150 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 100, 50, 150 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 200, 0, 50 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 200, 0, -50 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 200, 0, -150 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 200, 50, 150 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 400, 0, 50 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 400, 0, -50 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 400, 0, -150 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 400, 50, 150 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 400, 0, -250 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 400, 50, 250 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -400, 0, 50 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -400, 0, -50 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -400, 0, -150 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -400, 50, 150 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -400, 0, -250 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -400, 50, 250 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -100, 0, 50 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -100, 0, 150 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -100, 0, -50 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -100, 0, -150 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -200, 0, 50 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -200, 0, 150 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -200, 0, -50 );

var boxShape = new CANNON.Box(new CANNON.Vec3(50,50,50));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -200, 0, -150 );

var boxShape = new CANNON.Box(new CANNON.Vec3(10,20,20));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -52, -5, 0 );

var boxShape = new CANNON.Box(new CANNON.Vec3(10,20,20));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 52, -5, 0 );

var boxShape = new CANNON.Box(new CANNON.Vec3(10,20,20));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 52, -5, 100 );

var boxShape = new CANNON.Box(new CANNON.Vec3(10,20,20));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( 52, -5, -100 );

var boxShape = new CANNON.Box(new CANNON.Vec3(10,20,20));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -52, -5, 100 );

var boxShape = new CANNON.Box(new CANNON.Vec3(10,20,20));
var boxBody = new CANNON.Body();
boxBody.addShape(boxShape);
world.addBody(boxBody);
boxBody.position.set( -52, -5, -100 );

var loader = new THREE.ObjectLoader();

            obj = loader.load(
                "models/lamp.json",
                function ( obj ) {

                    obj.scale.set(0.75, 0.75, 0.75);
                    obj.rotateY(270*Math.PI/180);
                    bench = obj;
                    bench.position.set(-55,-5,15);
                    scene.add( bench );
                },
            );

            obj = loader.load(
                "models/wood-bench-2.json",
                function ( obj ) {

                    obj.scale.set(0.1, 0.1, 0.1);
                    obj.rotateY(270*Math.PI/180);
                    bench = obj;
                    bench.position.set(-52,-5,0);
                    scene.add( bench );
                },
            );

            obj = loader.load(
                "models/wood-bench-2.json",
                function ( obj ) {

                    obj.scale.set(0.1, 0.1, 0.1);
                    obj.rotateY(270*Math.PI/180);
                    bench1 = obj;
                    bench1.rotation.y = (Math.PI/2);
                    bench1.position.set(52,-5,0);
                    scene.add( bench1 );
                },
            );

            obj = loader.load(
                "models/wood-bench-2.json",
                function ( obj ) {

                    obj.scale.set(0.1, 0.1, 0.1);
                    obj.rotateY(270*Math.PI/180);
                    bench = obj;
                    bench.position.set(-52,-5,100);
                    scene.add( bench );
                },
            );

            obj = loader.load(
                "models/wood-bench-2.json",
                function ( obj ) {

                    obj.scale.set(0.1, 0.1, 0.1);
                    obj.rotateY(270*Math.PI/180);
                    bench = obj;
                    bench.position.set(-52,-5,-100);
                    scene.add( bench );
                },
            );

            bj = loader.load(
                "models/wood-bench-2.json",
                function ( obj ) {

                    obj.scale.set(0.1, 0.1, 0.1);
                    obj.rotateY(270*Math.PI/180);
                    bench = obj;
                    bench.rotation.y = (Math.PI/2);
                    bench.position.set(52,-5,100);
                    scene.add( bench );
                },
            );

            obj = loader.load(
                "models/wood-bench-2.json",
                function ( obj ) {

                    obj.scale.set(0.1, 0.1, 0.1);
                    obj.rotateY(270*Math.PI/180);
                    bench = obj;
                    bench.rotation.y = (Math.PI/2);
                    bench.position.set(52,-5,-100);
                    scene.add( bench );
                },
            );

}          

var dt = 1/60;
function animate() {
	requestAnimationFrame(animate);
	if(controls.enabled){world.step(dt);}		
    controls.update( Date.now() - time );
    renderer.render( scene, camera );
    time = Date.now();
}
			
	
			
		
        </script>
    </body>
</html>